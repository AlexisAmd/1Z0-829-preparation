# Concurrency
### Thread interrupt
interrupt() only impacts a thread that is in a **WAITING** or **TIMED_WAITING** state.  
Calling interrupt() on a thread in a **NEW** or **RUNNABLE** state has no impact.
Interrupting a thread that is not alive need not have any effect.

### ScheduledExecutorService

```java
public interface ScheduledExecutorService extends ExecutorService {...
}
```

```java
ScheduledExecutorService service=
    Executors.newSingleThreadScheduledExecutor();
```

### Parallel Stream
The `forEachOrdered()` method will process the elements in the order in which they are stored in the
stream.
### Reduce
```java
Stream<T> stream

<U> U reduce(U identity,
    BiFunction<U,? super T,U>accumulator,
    BinaryOperator<U> combiner)
```
Performs a reduction on the elements of this stream, using the provided identity, accumulation and
combining functions.

![predictable results at runtime](images/reduce-parallel-predeterminate.png)

#### Sequential
To obtain an equivalent sequential stream of an existing parallel stream.
```java
List<Integer> sequentialResult = numbers.parallelStream()
    .sequential()  // This makes the stream sequential
    .collect(Collectors.toList());

```


## ExecutorService

### Methods

```java
Future<?> submit(Runnable task)

<T> Future<T> submit(Callable<T> task)
    
void execute(Runnable command) //from the parent Executor
```
Calling get on Future<?> returns null.
### Future
```java
V get(long timeout,
 TimeUnit unit)
throws InterruptedException,
ExecutionException,
TimeoutException
```

### Shutdown

```java
void executor(){
  ExecutorService executorService = Executors.newSingleThreadExecutor();
  try{
      executorService.submit(printInventory);
    }finally{
      //if you do not call this the method
      //the code will run but never terminate,
      executorService.shutdown();
    }
}
```

## Concurrent Collections
### Sorted Concurrent Collections
If you see `SkipList` as part of a concurrent class name, it means it is sorted in some way.
 - ConcurrentSkipListSet
 - ConcurrentSkipListMap